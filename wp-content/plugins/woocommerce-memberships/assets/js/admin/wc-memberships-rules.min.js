"use strict";(function(){jQuery(document).ready(function(d){var l,u,h,e,t,f;return f=null!=(e=window.wc_memberships_admin)?e:{},u=function(e){return{type:e.split("|")[0],name:e.split("|")[1]}},l=function(e){var t;switch(t={},e.type){case"taxonomy":t.action="wc_memberships_json_search_terms",t.security=f.search_terms_nonce,t.taxonomy=e.name;break;case"post_type":t.action="product"===e.name?"woocommerce_json_search_products_and_variations":"wc_memberships_json_search_posts",t.security="product"===e.name?f.search_products_nonce:f.search_posts_nonce,t.post_type=e.name}return t},h=function(i){var n;return n=0,d("table."+i+"-rules tbody."+i+"-rule").each(function(e,t){if(!d(t).hasClass(i+"-rule-__INDEX__"))return d(t).removeClass(function(e,t){var s,n;if(n=new RegExp(i+"-rule-[0-9]","g"),s=t.match(n))return s[0]}),d(t).addClass(i+"-rule-"+n),d("input, select, textarea",t).each(function(e,t){var s;if((s=jQuery(t)).attr("name"))return s.attr("name",s.attr("name").replace(/\[([^[]*)\]/,"["+n+"]"))}),n++})},t=function(e){var t,s,n,i;if(i="INPUT"===(n=d(e).get(0).tagName)?d('input[type="radio"][name="'+d(e).attr("name")+'"]:checked').val():d(e).val(),t=d(e).closest(".rule"),"immediate"===i){if(t.find(".js-show-if-access-schedule-immediate").removeClass("hide"),t.find(".js-hide-if-access-schedule-immediate").addClass("hide"),"SELECT"===n)return t.find(".js-access-schedule-period-selector").val(i).first().focus()}else if(t.find(".js-show-if-access-schedule-immediate").addClass("hide"),t.find(".js-hide-if-access-schedule-immediate").removeClass("hide"),"SELECT"!==n||d(e).hasClass("access_schedule-period")||t.find(".access_schedule-period").find("option").removeAttr("selected"),(s=t.find(".access_schedule-amount")).val()||s.val(1),d(e).hasClass("js-schedule-type"))return s.focus()},f.initializeRuleset=function(r){var a,o;return o=".js-object-ids",(a=d("."+r+"-rules")).on("change",".js-content-type",function(e){var t,s,n;return n=l(u(d(this).val())),t=d(this).closest("tr").find(o),d(t).removeData("selected").val("").select2("destroy"),s=t,f.initializeEnhancedSelect(s,n)}),a.on("change",".js-access-schedule-period-selector",function(e){return t(this)}),a.find(o).each(function(){var e,t;if(!d(this).closest("tbody").hasClass(r+"-rule-__INDEX__"))return t=d(this).closest("tbody").find(".js-content-type").get(0).value,e=l(u(t)),f.initializeEnhancedSelect(this,e)}),a.find(".js-add-rule").click(function(){var e,t,s,n,i,c;return s=a.find("."+r+"-rule-__INDEX__"),i=a.children("tbody").length-1,e=d(s.prop("outerHTML").replace(/__INDEX__/g,i)),s.before(e),(t=e.find("select.membership-plan"))&&t.select2(),e.find(".js-content-type").length&&(n=e.find(".js-content-type").get(0).value,c=l(u(n)),f.initializeEnhancedSelect(e.find(o),c)),a.find(".norules").addClass("hide"),a.find("tfoot .js-remove-rules").removeClass("hide"),h(r)}),a.find(".js-remove-rules").click(function(){var e;return e=a.find('th.check-column input[type="checkbox"]:checked'),d.when(e.closest("tbody").fadeOut(400,function(){var e;return(e=d(this)).find(".js-rule-id").val()?e.addClass("hide").find(".js-rule-remove").val(1):setTimeout(function(){return e.remove()},1)})).then(function(){return a.find(".rule:visible").length<1&&(a.find(".norules").removeClass("hide"),a.find(".js-remove-rules").addClass("hide")),a.find('th.check-column input[type="checkbox"]').removeAttr("checked"),h(r)})})}})}).call(void 0);